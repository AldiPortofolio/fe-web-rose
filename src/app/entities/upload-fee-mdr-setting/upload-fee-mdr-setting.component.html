<!-- <op-navigation></op-navigation> -->

<div class="card border-primary">
    <div class="card-body">
        <h5 class="card-title">Upload Fee Mdr Setting</h5>
        <div>
            <br>
            <!--  SEARCH -->
            <!-- <form> -->
            <!-- <div class="form-group">
          <div class="row">
            <div class="col">
              <label for="from">Date From:</label>
              <input type="text" class="form-control form-half" ngbDatepicker #dateStart="ngbDatepicker" [(ngModel)]="dateStartMdl"
                name="dateStart" />
              <button (click)="dateStart.toggle()">
                <i class="fa fa-calendar fa-lg"></i>
              </button>
            </div>
            <div class="col">
              <label for="to">Date To:</label>
              <input type="text" class="form-control form-half" ngbDatepicker #dateEnd="ngbDatepicker" [(ngModel)]="dateEndMdl"
                name="endStart" />
              <button (click)="dateEnd.toggle()">
                <i class="fa fa-calendar fa-lg"></i>
              </button>
            </div>
            <div class="col"></div>
            <div class="col"></div>
          </div>

        </div> -->

            <input type="file" class="btn btn-outline-primary btn-sm" accept="csv/*" (change)="handleFileInput($event.target.files)"
                name="file" />
            <button type="submit" (click)="submitUpload()" class="btn btn-outline-primary btn-md">
                <i class="fa fa-upload fa-lg"></i>
            </button>
            <!-- <button type="submit" class="btn btn-outline-success btn-md" (click)="onFilter()">
          <i class="fa fa-search fa-lg"></i>
        </button> -->
            <button type="submit" class="btn btn-outline-info btn-md" (click)="onRefresh()">
                <i class="fa fa-refresh fa-lg"></i>
            </button>

            <!-- </form> -->
            <div>
                <button class="btn btn-link btn-sm mt-1" (click)="downloadTemplate('downloadTemplate.xlsx')">
                    download template
                    <i class="fa fa-download fa-sm"></i>
                </button>
            </div>
        </div>

        <div style="height:400px; padding: 20px 20px 5px 5px">
            <div class="table-responsive">
                <table class="table table-sm table-hover table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Request Date</th>
                            <th scope="col">Name File</th>
                            <th scope="col">Status</th>
                            <th scope="col">Requestor</th>
                            <th scope="col">File Upload</th>
                            <th scope="col">File Success</th>
                            <th scope="col">File Err</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let upload of uploadList">
                            <td>{{upload.date | date:'dd - MMMM - yyyy':'GMT'}}</td>
                            <td>{{upload.filePath}}</td>
                            <td>{{upload.status}}</td>
                            <td>{{upload.user}}</td>
                            <td>
                                <button type="button" class="btn btn-outline-primary btn-sm" (click)="downloadFile(upload.filePath)">
                                    <i class="fa fa-download fa-md"></i>
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-primary btn-sm" (click)="downloadResultFile(upload.filePath)">
                                    <i class="fa fa-download fa-md"></i>
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-outline-primary btn-sm" (click)="downloadResultFile(upload.filePathErr)">
                                    <i class="fa fa-download fa-md"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <ngb-pagination size="sm" [collectionSize]="totalData" [(page)]="curPage" [maxSize]="totalRecord"
                (pageChange)="loadPage($event)" [boundaryLinks]="true"></ngb-pagination>
        </div>



        <!-- <ngb-pagination size="sm" [collectionSize]="totalData" [(page)]="curPage" [maxSize]="totalRecord" (pageChange)="loadPage()"
            [boundaryLinks]="true"></ngb-pagination> -->

    </div>
</div>